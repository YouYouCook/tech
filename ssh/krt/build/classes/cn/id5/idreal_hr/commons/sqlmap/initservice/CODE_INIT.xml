<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="CODE_INIT" >
  <resultMap id="RvicecodeInitResult" class="cn.id5.idreal_hr.commons.bo.initservice.CodeInitBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Tue Feb 22 13:48:28 CST 2011.
    -->
    <result column="SCI_ID" property="sciId" jdbcType="DECIMAL" />
    <result column="SC_ID" property="scId" jdbcType="DECIMAL" />
    <result column="EI_ENTERPRISE_ID" property="eiEnterpriseId" jdbcType="VARCHAR" />
    <result column="SCC_SERVICE_CODE" property="sccServiceCode" jdbcType="VARCHAR" />
    <result column="SCI_STATUS" property="sciStatus" jdbcType="CHAR" />
    <result column="SCI_CREATEUSER" property="sciCreateuser" jdbcType="VARCHAR" />
    <result column="CUSTOMER_CODE" property="customerCode" jdbcType="VARCHAR" />
    <result column="SCI_RESET_TIME" property="sciResetTime" jdbcType="VARCHAR" />
    <result column="SCI_REMARK" property="sciRemark" jdbcType="VARCHAR" />
    <!--服务内容  -->
    <result column="SC_SERVICE_NAME" property="scServiceName" jdbcType="VARCHAR" />
    <!--被修改过的密码  -->
    <result column="SCC_PASSWORD" property="sccPassword" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="RvicecodeInitResult" parameterClass="cn.id5.idreal_hr.commons.bo.initservice.CodeInitBO" >
    select SCI_ID, SC_ID, EI_ENTERPRISE_ID, SCC_SERVICE_CODE, SCI_STATUS, SCI_CREATEUSER,
      CUSTOMER_CODE, SCI_RESET_TIME, SCI_REMARK
    from B_SERVICECODE_INIT
    where SCI_ID = #sciId#
  </select>
  <select id="selectAll" resultMap="RvicecodeInitResult" parameterClass="java.util.Map" >
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select 
	    SCI_ID, 
	    B_SERVICECODE_INIT.SC_ID, 
	    B_SERVICECODE_INIT.EI_ENTERPRISE_ID, 
	    B_SERVICECODE_INIT.SCC_SERVICE_CODE, 
	    SCI_STATUS, 
	    SCI_CREATEUSER,
      	B_SERVICECODE_INIT.CUSTOMER_CODE, 
      	SCI_RESET_TIME, 
      	SCI_REMARK,
      	B_SERVICE_CONFIG_CODE.SCC_PASSWORD,
      	B_SERVICE_CONFIG.SC_SERVICE_NAME
    from 
    	B_SERVICECODE_INIT,B_SERVICE_CONFIG,B_SERVICE_CONFIG_CODE 
    where 1=1 
        <isNotNull property="sccServiceCode">
				<isNotEmpty  property="sccServiceCode">
				and B_SERVICECODE_INIT.SCC_SERVICE_CODE like '%$sccServiceCode$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="eiEnterpriseId">
				<isNotEmpty  property="eiEnterpriseId">
				and B_SERVICECODE_INIT.EI_ENTERPRISE_ID like '%$eiEnterpriseId$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="sciStatus">
				<isNotEmpty  property="sciStatus">
				and SCI_STATUS like '%$sciStatus$%'
				</isNotEmpty>
			</isNotNull>	
			<isNotNull property="startDate">
				<isNotEmpty  property="startDate">
				and substr(SCI_RESET_TIME,1,10)>= '$startDate$'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="endDate">
				<isNotEmpty  property="endDate">
			 <![CDATA[ 	and substr(SCI_RESET_TIME,1,10) <= '$endDate$' ]]>
				</isNotEmpty>
			</isNotNull>
			 <isNotNull property="sciCreateuser">
				<isNotEmpty  property="sciCreateuser">
				and B_SERVICECODE_INIT.SCI_CREATEUSER like '%$sciCreateuser$%'
				</isNotEmpty>
			</isNotNull>
			 <isNotNull property="customerCode">
				<isNotEmpty  property="customerCode">
				and B_SERVICECODE_INIT.CUSTOMER_CODE like '%$customerCode$%'
				</isNotEmpty>
			</isNotNull>
			and B_SERVICECODE_INIT.SC_ID = B_SERVICE_CONFIG.SC_ID and B_SERVICE_CONFIG_CODE.SC_ID = B_SERVICE_CONFIG.SC_ID  and B_SERVICECODE_INIT.SCC_SERVICE_CODE = B_SERVICE_CONFIG_CODE.SCC_SERVICE_CODE
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
     SELECT count(1) as ID from ( 
  	select 
	    SCI_ID, 
	    B_SERVICECODE_INIT.SC_ID, 
	    B_SERVICECODE_INIT.EI_ENTERPRISE_ID, 
	    B_SERVICECODE_INIT.SCC_SERVICE_CODE, 
	    SCI_STATUS, 
	    SCI_CREATEUSER,
      	B_SERVICECODE_INIT.CUSTOMER_CODE, 
      	SCI_RESET_TIME, 
      	SCI_REMARK,
      	B_SERVICE_CONFIG_CODE.SCC_PASSWORD,
      	B_SERVICE_CONFIG.SC_SERVICE_NAME
    from 
    	B_SERVICECODE_INIT,B_SERVICE_CONFIG,B_SERVICE_CONFIG_CODE 
    where 1=1 
        <isNotNull property="sccServiceCode">
				<isNotEmpty  property="sccServiceCode">
				and B_SERVICECODE_INIT.SCC_SERVICE_CODE like '%$sccServiceCode$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="eiEnterpriseId">
				<isNotEmpty  property="eiEnterpriseId">
				and B_SERVICECODE_INIT.EI_ENTERPRISE_ID like '%$eiEnterpriseId$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="sciStatus">
				<isNotEmpty  property="sciStatus">
				and SCI_STATUS like '%$sciStatus$%'
				</isNotEmpty>
			</isNotNull>	
			<isNotNull property="startDate">
				<isNotEmpty  property="startDate">
				and substr(SCI_RESET_TIME,1,10) >= '$startDate$'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="endDate">
				<isNotEmpty  property="endDate">
			 <![CDATA[ 	and substr(SCI_RESET_TIME,1,10) <= '$endDate$' ]]>
				</isNotEmpty>
			</isNotNull>
			 <isNotNull property="sciCreateuser">
				<isNotEmpty  property="sciCreateuser">
				and B_SERVICECODE_INIT.SCI_CREATEUSER like '%$sciCreateuser$%'
				</isNotEmpty>
			</isNotNull>
			 <isNotNull property="customerCode">
				<isNotEmpty  property="customerCode">
				and B_SERVICECODE_INIT.CUSTOMER_CODE like '%$customerCode$%'
				</isNotEmpty>
			</isNotNull>
			and B_SERVICECODE_INIT.SC_ID = B_SERVICE_CONFIG.SC_ID and B_SERVICE_CONFIG_CODE.SC_ID = B_SERVICE_CONFIG.SC_ID  and B_SERVICECODE_INIT.SCC_SERVICE_CODE = B_SERVICE_CONFIG_CODE.SCC_SERVICE_CODE
     ) 
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.initservice.CodeInitBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Tue Feb 22 13:48:28 CST 2011.
    -->
    delete from B_SERVICECODE_INIT
    where SCI_ID = #sciId#
  </delete>
  <insert id="insert" parameterClass="cn.id5.idreal_hr.commons.bo.initservice.CodeInitBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Tue Feb 22 13:48:28 CST 2011.
    -->
    <selectKey resultClass="java.math.BigDecimal" keyProperty="sciId" >
      SELECT SEQ_B_SERVICECODE_INIT.NEXTVAL AS ID FROM DUAL
    </selectKey>
    insert into B_SERVICECODE_INIT (SCI_ID, SC_ID, EI_ENTERPRISE_ID, SCC_SERVICE_CODE, SCI_STATUS,
      SCI_CREATEUSER, CUSTOMER_CODE, SCI_RESET_TIME, SCI_REMARK)
    values (#sciId#, #scId#, #eiEnterpriseId#, #sccServiceCode#, #sciStatus#, #sciCreateuser#,
      #customerCode#, to_char(sysdate,'yyyy-mm-dd hh24:mi:ss'), #sciRemark#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.initservice.CodeInitBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Tue Feb 22 13:48:28 CST 2011.
    -->
    update B_SERVICECODE_INIT
    set SC_ID = #scId#,
      EI_ENTERPRISE_ID = #eiEnterpriseId#,
      SCC_SERVICE_CODE = #sccServiceCode#,
      SCI_STATUS = #sciStatus#,
      SCI_CREATEUSER = #sciCreateuser#,
      CUSTOMER_CODE = #customerCode#,
      SCI_RESET_TIME = #sciResetTime#,
      SCI_REMARK = #sciRemark#
    where SCI_ID = #sciId#
  </update>
  
   <update id="updateStatus" parameterClass="cn.id5.idreal_hr.commons.bo.initservice.CodeInitBO">
		update B_SERVICECODE_INIT set SCI_STATUS=#sciStatus# where SCI_ID = #sciId#
	</update>
	
  <update id="setCuiNoCheckForTimer" parameterClass="java.lang.String">
    <!--
      设置 B_CHECK_USER_INFO 数据排除定时验证标识 CUI_STATUS = '0'
    -->
    update B_CHECK_USER_INFO
       set CUI_STATUS = '0'
     where SCC_ID = #value#
  </update>
</sqlMap>