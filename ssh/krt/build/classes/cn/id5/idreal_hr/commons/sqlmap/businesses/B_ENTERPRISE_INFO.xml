<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="B_ENTERPRISE_INFO" >
<typeAlias alias="enterpriseInfoBO" type="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO"/>
  <resultMap id="TerpriseInfoResult" class="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    <result column="EI_ID" property="eiId" jdbcType="DECIMAL" />
    <result column="EI_ENTERPRISE_ID" property="eiEnterpriseId" jdbcType="VARCHAR" />
    <result column="EI_ENTERPRISE_NAME" property="eiEnterpriseName" jdbcType="VARCHAR" />
    <result column="EI_ENTERPRISE_PROPERTY" property="eiEnterpriseProperty" jdbcType="CHAR" />
    <result column="EI_ENTERPRISE_SCALE" property="eiEnterpriseScale" jdbcType="CHAR" />
    <result column="S_I_IN_INDUSTRY_CODE" property="sIInIndustryCode" jdbcType="DECIMAL" />
    <result column="PI_ID" property="piId" jdbcType="DECIMAL" />
    <result column="CI_ID" property="ciId" jdbcType="DECIMAL" />
    <result column="DI_ID" property="diId" jdbcType="DECIMAL" />
    <result column="EI_STATUS" property="eiStatus" jdbcType="CHAR" />
    <result column="EI_CREATEUSER" property="eiCreateuser" jdbcType="VARCHAR" />
    <result column="EI_CREATETIME" property="eiCreatetime" jdbcType="VARCHAR" />
    <result column="EI_MODIFYUSER" property="eiModifyuser" jdbcType="VARCHAR" />
    <result column="EI_MODIFYTIME" property="eiModifytime" jdbcType="VARCHAR" />
    <result column="EI_EXT1" property="eiExt1" jdbcType="VARCHAR" />
    <result column="EI_EXT2" property="eiExt2" jdbcType="VARCHAR" />
    <result column="EI_EXT3" property="eiExt3" jdbcType="VARCHAR" />
    <result column="CUSTOMER_CODE" property="customerCode" jdbcType="VARCHAR" />
  </resultMap>
    <resultMap id="enterpInfoResult_res" class="enterpriseInfoBO" extends="TerpriseInfoResult">
        <result property="provinceInfoBo" column="PI_ID" select="S_PROVINCE_INFO.selectByProvinceId"/>
        <result property="cityInfoBo" column="CI_ID" select="S_CITY_INFO.selectByCityId"/>
        <result property="districtInfoBo" column="DI_ID" select="S_DISTRICT_INFO.selectByDistrictId"/>
        <result property="industryBo" column="S_I_IN_INDUSTRY_CODE" select="S_INDUSTRY.selectByIndustryCode"/>
  	</resultMap>
  <select id="selectByPrimaryKey" resultMap="TerpriseInfoResult" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_ID = #eiId#
  </select>
  <select id="selectById" resultMap="enterpInfoResult_res" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_ID = #eiId#
  </select>
   <select id="selectByName" resultMap="TerpriseInfoResult" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_ENTERPRISE_NAME = #eiEnterpriseName#
  </select>
    <select id="selectByEnterpriseId" resultMap="TerpriseInfoResult" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_ENTERPRISE_ID = #eiEnterpriseId#
  </select>
  <select id="selectAll" resultMap="TerpriseInfoResult" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
     SELECT count(1) as ID from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
     ) 
  </select>
  <select id="selectAllInThisEnterp" resultMap="TerpriseInfoResult" parameterClass="java.util.Map" >
    <!--
    	查找坐席所在单位的所有坐席创建的企业客户信息 不用加上条件，因为seatAccount不可能为空
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
     where customer_code =
       (select customer_code
          from c_t_customer
         where customer_id =
               (select customer_id from c_t_seat where seat_account = '$seatAccount$'))
      
     and EI_STATUS='1'
      <isNotNull property="eiEnterpriseId">
				<isNotEmpty  property="eiEnterpriseId">
	 and  EI_ENTERPRISE_ID = '$eiEnterpriseId$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="eiEnterpriseName">
				<isNotEmpty  property="eiEnterpriseName">
	 and   EI_ENTERPRISE_NAME like '%$eiEnterpriseName$%'
				</isNotEmpty>
	  </isNotNull>
		<isNotEmpty prepend="AND" property="startDate">
     		EI_CREATETIME >='$startDate$'
     	</isNotEmpty>
     	<isNotEmpty prepend="AND" property="endDate">
     		<![CDATA[EI_CREATETIME<=to_char(to_date('$endDate$','yyyy-mm-dd')+1,'yyyy-mm-dd') ]]>
     	</isNotEmpty>
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectAllInThisEnterpOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
     SELECT count(1) as ID from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
     where CUSTOMER_CODE =
       (select customer_code
          from c_t_customer
         where customer_id =
               (select customer_id from c_t_seat where seat_account = '$seatAccount$'))
      and EI_STATUS='1'
       <isNotNull property="eiEnterpriseId">
				<isNotEmpty  property="eiEnterpriseId">
	  and  EI_ENTERPRISE_ID = '$eiEnterpriseId$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="eiEnterpriseName">
				<isNotEmpty  property="eiEnterpriseName">
	 and   EI_ENTERPRISE_NAME like '%$eiEnterpriseName$%'
				</isNotEmpty>
	  </isNotNull>
	  <isNotEmpty prepend="AND" property="startDate">
     		EI_CREATETIME >='$startDate$'
     	</isNotEmpty>
     	<isNotEmpty prepend="AND" property="endDate">
     		<![CDATA[EI_CREATETIME<=to_char(to_date('$endDate$','yyyy-mm-dd')+1,'yyyy-mm-dd') ]]>
     	</isNotEmpty>
     ) 
  </select>
   <select id="selectAllSelfCreat" resultMap="TerpriseInfoResult" parameterClass="java.util.Map" >
    <!--
    	查找坐席所在单位的所有坐席创建的企业客户信息 不用加上条件，因为seatAccount不可能为空
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_CREATEUSER = '$seatAccount$'
     and EI_STATUS='1'
     <isNotNull property="eiEnterpriseId">
				<isNotEmpty  property="eiEnterpriseId">
				 and  EI_ENTERPRISE_ID = '$eiEnterpriseId$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="eiEnterpriseName">
				<isNotEmpty  property="eiEnterpriseName">
				 and   EI_ENTERPRISE_NAME like '%$eiEnterpriseName$%'
				</isNotEmpty>
	  </isNotNull>
	  <isNotEmpty prepend="AND" property="startDate">
     		EI_CREATETIME >='$startDate$'
     	</isNotEmpty>
     	<isNotEmpty prepend="AND" property="endDate">
     		<![CDATA[EI_CREATETIME<=to_char(to_date('$endDate$','yyyy-mm-dd')+1,'yyyy-mm-dd') ]]>
     	</isNotEmpty>
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectAllSelfCreatOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
     SELECT count(1) as ID from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_CREATEUSER = '$seatAccount$'
     and EI_STATUS='1'
     <isNotNull property="eiEnterpriseId">
				<isNotEmpty  property="eiEnterpriseId">
				 and  EI_ENTERPRISE_ID = '$eiEnterpriseId$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="eiEnterpriseName">
				<isNotEmpty  property="eiEnterpriseName">
				 and   EI_ENTERPRISE_NAME like '%$eiEnterpriseName$%'
				</isNotEmpty>
	  </isNotNull>
	  <isNotEmpty prepend="AND" property="startDate">
     		EI_CREATETIME >='$startDate$'
     	</isNotEmpty>
     	<isNotEmpty prepend="AND" property="endDate">
     		<![CDATA[EI_CREATETIME<=to_char(to_date('$endDate$','yyyy-mm-dd')+1,'yyyy-mm-dd') ]]>
     	</isNotEmpty>
     ) 
  </select>
  <delete id="deleteByPrimaryKeyz" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--真删除
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    delete from B_ENTERPRISE_INFO
    where EI_ID = #eiId#
  </delete>
   <delete id="deleteByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--置为无效
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
   update B_ENTERPRISE_INFO
    set
      EI_STATUS = 0
    where EI_ID = #eiId#
  </delete>
  <insert id="insert" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    -->
    <selectKey resultClass="java.math.BigDecimal" keyProperty="eiId" >
      SELECT SEQ_B_ENTERPRISE_INFO.NEXTVAL AS ID FROM DUAL
    </selectKey>
    insert into B_ENTERPRISE_INFO (EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME,
      EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE, S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID,
      EI_STATUS, EI_CREATEUSER, EI_CREATETIME, EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2,
      EI_EXT3, CUSTOMER_CODE)
    values (#eiId#, #eiEnterpriseId#, #eiEnterpriseName#, #eiEnterpriseProperty#,
      #eiEnterpriseScale#, #sIInIndustryCode#, #piId#, #ciId#, #diId#, #eiStatus#, #eiCreateuser#,
       to_char(sysdate,'yyyy-MM-dd HH:mm:ss'), #eiModifyuser#, #eiModifytime#, #eiExt1#, #eiExt2#, #eiExt3#, #customerCode#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Fri Feb 18 11:00:20 CST 2011.
    --> 
    update B_ENTERPRISE_INFO
    set EI_ENTERPRISE_ID = #eiEnterpriseId#,
      EI_ENTERPRISE_NAME = #eiEnterpriseName#,
      EI_ENTERPRISE_PROPERTY = #eiEnterpriseProperty#,
      EI_ENTERPRISE_SCALE = #eiEnterpriseScale#,
      S_I_IN_INDUSTRY_CODE = #sIInIndustryCode#,
      PI_ID = #piId#,
      CI_ID = #ciId#,
      DI_ID = #diId#,
      EI_STATUS = #eiStatus#,
      EI_CREATEUSER = #eiCreateuser#,
      EI_CREATETIME = #eiCreatetime#,
      EI_MODIFYUSER = #eiModifyuser#,
      EI_MODIFYTIME =  to_char(sysdate,'yyyy-MM-dd HH:mm:ss'),
      EI_EXT1 = #eiExt1#,
      EI_EXT2 = #eiExt2#,
      EI_EXT3 = #eiExt3#,
      CUSTOMER_CODE = #customerCode#
    where EI_ID = #eiId#
  </update>
</sqlMap>