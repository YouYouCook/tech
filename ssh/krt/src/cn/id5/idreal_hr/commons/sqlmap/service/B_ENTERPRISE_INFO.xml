<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="SERVICE_B_ENTERPRISE_INFO" >
<typeAlias alias="service_EnterpriseInfoBO" type="cn.id5.idreal_hr.commons.bo.service.EnterpriseInfoBO"/>
  <resultMap id="EnterpriseInfoResult" class="cn.id5.idreal_hr.commons.bo.service.EnterpriseInfoBO" >
    <!-- -->
    <result column="EI_ID" property="eiId" jdbcType="DECIMAL" />
    <result column="EI_ENTERPRISE_ID" property="eiEnterpriseId" jdbcType="VARCHAR" />
    <result column="EI_ENTERPRISE_NAME" property="eiEnterpriseName" jdbcType="VARCHAR" />
    <result column="EI_ENTERPRISE_PROPERTY" property="eiEnterpriseProperty" jdbcType="CHAR" />
    <result column="EI_ENTERPRISE_SCALE" property="eiEnterpriseScale" jdbcType="CHAR" />
    <result column="S_I_IN_INDUSTRY_CODE" property="sIInIndustryCode" jdbcType="DECIMAL" />
    <result column="PI_ID" property="piId" jdbcType="DECIMAL" />
    <result column="CI_ID" property="ciId" jdbcType="DECIMAL" />
    <result column="DI_ID" property="diId" jdbcType="DECIMAL" />
    <result column="EI_STATUS" property="eiStatus" jdbcType="CHAR" />
    <result column="EI_CREATEUSER" property="eiCreateuser" jdbcType="VARCHAR" />
    <result column="EI_CREATETIME" property="eiCreatetime" jdbcType="VARCHAR" />
    <result column="EI_MODIFYUSER" property="eiModifyuser" jdbcType="VARCHAR" />
    <result column="EI_MODIFYTIME" property="eiModifytime" jdbcType="VARCHAR" />
    <result column="EI_EXT1" property="eiExt1" jdbcType="VARCHAR" />
    <result column="EI_EXT2" property="eiExt2" jdbcType="VARCHAR" />
    <result column="EI_EXT3" property="eiExt3" jdbcType="VARCHAR" />
    <result column="CUSTOMER_CODE" property="customerCode" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="service_EnterpInfoResult_res" class="service_EnterpriseInfoBO" extends="EnterpriseInfoResult">
     <result property="provinceInfoBo" column="PI_ID" select="S_PROVINCE_INFO.selectByProvinceId"/>
     <result property="cityInfoBo" column="CI_ID" select="S_CITY_INFO.selectByCityId"/>
     <result property="districtInfoBo" column="DI_ID" select="S_DISTRICT_INFO.selectByDistrictId"/>
     <result property="industryBo" column="S_I_IN_INDUSTRY_CODE" select="S_INDUSTRY.selectByIndustryCode"/>
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="EnterpriseInfoResult" parameterClass="cn.id5.idreal_hr.commons.bo.service.EnterpriseInfoBO" >
    <!--  -->
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_ID = #eiId# and EI_STATUS = 1
  </select>
  <select id="selectById" resultMap="service_EnterpInfoResult_res" parameterClass="java.lang.String" >
    <!--
    	查询多内容显示BO， 包括省、市、地区等信息
    -->
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
    where EI_ID = #eiId# and EI_STATUS = 1
  </select>
  <select id="selectAll" resultMap="service_EnterpInfoResult_res" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Mon Feb 21 15:38:10 CST 2011.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
   where EI_STATUS = 1
    <dynamic>
	    <isNotNull prepend="AND" property="seatAccount">
		    <isEqual property="seatIsAdmin" compareValue="0">
		     customer_code = (
		     	 select customer_code from c_t_customer where customer_id = (
		     	 		select customer_id from c_t_seat where seat_account = #seatAccount#
		     	 )
		     )
			</isEqual>
		    <isEqual property="seatIsAdmin" compareValue="1">
		     EI_CREATEUSER = #seatAccount#
		    </isEqual>
	    </isNotNull>
	    <isNotNull prepend="AND" property="enterpriseId">
	    	EI_ENTERPRISE_ID = #enterpriseId#
	    </isNotNull>
	    <isNotNull prepend="AND" property="enterpriseName">
	    	EI_ENTERPRISE_NAME like '%$enterpriseName$%'
	    </isNotNull>
	    <isNotNull prepend="AND" property="startCreateTime">
    <![CDATA[ 
	    	EI_CREATETIME >= #startCreateTime#
	]]>
	    </isNotNull>
	    <isNotNull prepend="AND" property="endCreateTime">
    <![CDATA[ 
	    	EI_CREATETIME <= #endCreateTime#
	]]>
	    </isNotNull>
    </dynamic>
   order by EI_ID desc
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Mon Feb 21 15:38:10 CST 2011.
    -->
     SELECT count(1) as ID from ( 
    select EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME, EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE,
      S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID, EI_STATUS, EI_CREATEUSER, EI_CREATETIME,
      EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2, EI_EXT3, CUSTOMER_CODE
    from B_ENTERPRISE_INFO
   where EI_STATUS = 1
    <dynamic>
	    <isNotNull prepend="AND" property="seatAccount">
		    <isEqual property="seatIsAdmin" compareValue="0">
		     customer_code = (
		     	 select customer_code from c_t_customer where customer_id = (
		     	 		select customer_id from c_t_seat where seat_account = #seatAccount#
		     	 )
		     )
			</isEqual>
		    <isEqual property="seatIsAdmin" compareValue="1">
		     EI_CREATEUSER = #seatAccount#
		    </isEqual>
	    </isNotNull>
	    <isNotNull prepend="AND" property="enterpriseId">
	    	EI_ENTERPRISE_ID = #enterpriseId#
	    </isNotNull>
	    <isNotNull prepend="AND" property="enterpriseName">
	    	EI_ENTERPRISE_NAME like '%$enterpriseName$%'
	    </isNotNull>
	    <isNotNull prepend="AND" property="startCreateTime">
    <![CDATA[ 
	    	EI_CREATETIME >= #startCreateTime#
	]]>
	    </isNotNull>
	    <isNotNull prepend="AND" property="endCreateTime">
    <![CDATA[ 
	    	EI_CREATETIME <= #endCreateTime#
	]]>
	    </isNotNull>
    </dynamic>
     ) 
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.service.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Mon Feb 21 15:38:10 CST 2011.
    -->
    delete from B_ENTERPRISE_INFO
    where EI_ID = #eiId#
  </delete>
  <insert id="insert" parameterClass="cn.id5.idreal_hr.commons.bo.service.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Mon Feb 21 15:38:10 CST 2011.
    -->
    <selectKey resultClass="java.math.BigDecimal" keyProperty="eiId" >
      SELECT SEQ_B_ENTERPRISE_INFO.NEXTVAL AS ID FROM DUAL
    </selectKey>
    insert into B_ENTERPRISE_INFO (EI_ID, EI_ENTERPRISE_ID, EI_ENTERPRISE_NAME,
      EI_ENTERPRISE_PROPERTY, EI_ENTERPRISE_SCALE, S_I_IN_INDUSTRY_CODE, PI_ID, CI_ID, DI_ID,
      EI_STATUS, EI_CREATEUSER, EI_CREATETIME, EI_MODIFYUSER, EI_MODIFYTIME, EI_EXT1, EI_EXT2,
      EI_EXT3, CUSTOMER_CODE)
    values (#eiId#, #eiEnterpriseId#, #eiEnterpriseName#, #eiEnterpriseProperty#,
      #eiEnterpriseScale#, #sIInIndustryCode#, #piId#, #ciId#, #diId#, #eiStatus#, #eiCreateuser#,
      #eiCreatetime#, #eiModifyuser#, #eiModifytime#, #eiExt1#, #eiExt2#, #eiExt3#, #customerCode#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.service.EnterpriseInfoBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Mon Feb 21 15:38:10 CST 2011.
    -->
    update B_ENTERPRISE_INFO
    set EI_ENTERPRISE_ID = #eiEnterpriseId#,
      EI_ENTERPRISE_NAME = #eiEnterpriseName#,
      EI_ENTERPRISE_PROPERTY = #eiEnterpriseProperty#,
      EI_ENTERPRISE_SCALE = #eiEnterpriseScale#,
      S_I_IN_INDUSTRY_CODE = #sIInIndustryCode#,
      PI_ID = #piId#,
      CI_ID = #ciId#,
      DI_ID = #diId#,
      EI_STATUS = #eiStatus#,
      EI_CREATEUSER = #eiCreateuser#,
      EI_CREATETIME = #eiCreatetime#,
      EI_MODIFYUSER = #eiModifyuser#,
      EI_MODIFYTIME = #eiModifytime#,
      EI_EXT1 = #eiExt1#,
      EI_EXT2 = #eiExt2#,
      EI_EXT3 = #eiExt3#,
      CUSTOMER_CODE = #customerCode#
    where EI_ID = #eiId#
  </update>
</sqlMap>