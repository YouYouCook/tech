<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="H_B_SERVICE_CONFIG_CODE" >
  <resultMap id="ServiceConfigCodeResult" class="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
    <result column="SCC_ID" property="sccId" jdbcType="DECIMAL" />
    <result column="SC_ID" property="scId" jdbcType="DECIMAL" />
    <result column="SCC_SERVICE_CODE" property="sccServiceCode" jdbcType="VARCHAR" />
    <result column="SCC_INIT_PASSWORD" property="sccInitPassword" jdbcType="VARCHAR" />
    <result column="SCC_PASSWORD" property="sccPassword" jdbcType="VARCHAR" />
    <result column="SCC_SERVICE_STARTTIME" property="sccServiceStarttime" jdbcType="VARCHAR" />
    <result column="SCC_SERVICE_ENDTIME" property="sccServiceEndtime" jdbcType="VARCHAR" />
    <result column="SCC_STATUS" property="sccStatus" jdbcType="CHAR" />
    <result column="SCC_REMARK" property="sccRemark" jdbcType="VARCHAR" />
    <result column="SCC_EMPLOYEE_NO" property="sccEmployeeNo" jdbcType="VARCHAR" />
    <result column="SCC_CHECK_REPORT" property="sccCheckReport" jdbcType="VARCHAR" />
    <result column="SCC_INIT_TIME" property="sccInitTime" jdbcType="VARCHAR" />
    <result column="SCC_ACCEPT_ORDER_TIME" property="sccAcceptOrderTime" jdbcType="VARCHAR" />
    <result column="SCC_CHECK_START_TIME" property="sccCheckStartTime" jdbcType="VARCHAR" />
    <result column="SCC_CHECK_END_TIME" property="sccCheckEndTime" jdbcType="VARCHAR" />
    <result column="SCC_CREATEUSER" property="sccCreateuser" jdbcType="VARCHAR" />
    <result column="SCC_CREATETIME" property="sccCreatetime" jdbcType="VARCHAR" />
    <result column="SCC_MODIFYUSER" property="sccModifyuser" jdbcType="VARCHAR" />
    <result column="SCC_MODIFYTIME" property="sccModifytime" jdbcType="VARCHAR" />
    <result column="SCC_EXT1" property="sccExt1" jdbcType="VARCHAR" />
    <result column="SCC_EXT2" property="sccExt2" jdbcType="VARCHAR" />
    <result column="SCC_EXT3" property="sccExt3" jdbcType="VARCHAR" />
    <result column="CUSTOMER_CODE" property="customerCode" jdbcType="VARCHAR" />
    <result column="SC_ID" property="serviceConfigBO" select="H_SERVICE_CONFIG.selectByPrimaryKey" />
    <result column="SCC_SUBMIT_TIME" property="sccSubmitTime" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="ServiceConfigCodeResult" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
    select SCC_ID, SC_ID, SCC_SERVICE_CODE, SCC_INIT_PASSWORD, SCC_PASSWORD, SCC_SERVICE_STARTTIME,
      SCC_SERVICE_ENDTIME, SCC_STATUS, SCC_REMARK, SCC_EMPLOYEE_NO, SCC_CHECK_REPORT, SCC_INIT_TIME,
      SCC_ACCEPT_ORDER_TIME, SCC_CHECK_START_TIME, SCC_CHECK_END_TIME, SCC_CREATEUSER,
      SCC_CREATETIME, SCC_MODIFYUSER, SCC_MODIFYTIME, SCC_EXT1, SCC_EXT2, SCC_EXT3, CUSTOMER_CODE,SCC_SUBMIT_TIME
    from B_SERVICE_CONFIG_CODE
    where SCC_ID = #sccId#
  </select>
  <select id="selectAll" resultMap="ServiceConfigCodeResult" parameterClass="java.util.Map" >
    <!--
     查询所有已提交数据
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SCC_ID, SC_ID, SCC_SERVICE_CODE, SCC_INIT_PASSWORD, SCC_PASSWORD, SCC_SERVICE_STARTTIME,
      SCC_SERVICE_ENDTIME, SCC_STATUS, SCC_REMARK, SCC_EMPLOYEE_NO, SCC_CHECK_REPORT, SCC_INIT_TIME,
      SCC_ACCEPT_ORDER_TIME, SCC_CHECK_START_TIME, SCC_CHECK_END_TIME, SCC_CREATEUSER,
      SCC_CREATETIME, SCC_MODIFYUSER, SCC_MODIFYTIME, SCC_EXT1, SCC_EXT2, SCC_EXT3, CUSTOMER_CODE,SCC_SUBMIT_TIME
    from B_SERVICE_CONFIG_CODE
    		<!-- 2：信息收集 -->
    	WHERE 1=1  
    	 <isNotEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS = #sccStatus#
         </isNotEmpty>
         <!-- 如果为空选择所有 -->  
    	 <isEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS = '2'
         </isEmpty>
    	 <isNotEmpty prepend="AND"  property="serviceCode">
               SCC_SERVICE_CODE = #serviceCode#
         </isNotEmpty>
          <isNotEmpty prepend="AND"  property="enterpriceUserId">
               SC_ID IN ( SELECT SC_ID FROM B_SERVICE_CONFIG WHERE EI_ENTERPRISE_ID = #enterpriceUserId#)
         </isNotEmpty>
          <isNotEmpty prepend="AND"  property="startDate">
              <![CDATA[ SCC_CREATETIME >= '$startDate$ 00:00:00']]>
         </isNotEmpty>
         <isNotEmpty prepend="AND"  property="endDate">
            <![CDATA[   SCC_CREATETIME <= '$endDate$ 23:59:59']]>
         </isNotEmpty>
         ORDER BY SCC_ID DESC
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
     SELECT count(1) as ID from ( 
    select SCC_ID, SC_ID, SCC_SERVICE_CODE, SCC_INIT_PASSWORD, SCC_PASSWORD, SCC_SERVICE_STARTTIME,
      SCC_SERVICE_ENDTIME, SCC_STATUS, SCC_REMARK, SCC_EMPLOYEE_NO, SCC_CHECK_REPORT, SCC_INIT_TIME,
      SCC_ACCEPT_ORDER_TIME, SCC_CHECK_START_TIME, SCC_CHECK_END_TIME, SCC_CREATEUSER,
      SCC_CREATETIME, SCC_MODIFYUSER, SCC_MODIFYTIME, SCC_EXT1, SCC_EXT2, SCC_EXT3, CUSTOMER_CODE,SCC_SUBMIT_TIME
    from B_SERVICE_CONFIG_CODE
    where 1 =1 
   		 <isNotEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS = #sccStatus#
         </isNotEmpty>  
    	 <isEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS = '2'
         </isEmpty>
    	<isNotEmpty prepend="AND"  property="serviceCode">
               SCC_SERVICE_CODE = #serviceCode#
         </isNotEmpty>
          <isNotEmpty prepend="AND"  property="enterpriceUserId">
               SC_ID IN ( SELECT SC_ID FROM B_SERVICE_CONFIG WHERE EI_ENTERPRISE_ID = #enterpriceUserId#)
         </isNotEmpty>
  		<isNotEmpty prepend="AND"  property="startDate">
              <![CDATA[ SCC_CREATETIME >= '$startDate$ 00:00:00']]>
         </isNotEmpty>
         <isNotEmpty prepend="AND"  property="endDate">
            <![CDATA[   SCC_CREATETIME <= '$endDate$ 23:59:59']]>
         </isNotEmpty>
     ) 
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
    delete from B_SERVICE_CONFIG_CODE
    where SCC_ID = #sccId#
  </delete>
  <insert id="insert" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
    <selectKey resultClass="java.math.BigDecimal" keyProperty="sccId" >
      SELECT SEQ_B_SERVICE_CONFIG_CODE.NEXTVAL AS ID FROM DUAL
    </selectKey>
    insert into B_SERVICE_CONFIG_CODE (SCC_ID, SC_ID, SCC_SERVICE_CODE, SCC_INIT_PASSWORD,
      SCC_PASSWORD, SCC_SERVICE_STARTTIME, SCC_SERVICE_ENDTIME, SCC_STATUS, SCC_REMARK,
      SCC_EMPLOYEE_NO, SCC_CHECK_REPORT, SCC_INIT_TIME, SCC_ACCEPT_ORDER_TIME, SCC_CHECK_START_TIME,
      SCC_CHECK_END_TIME, SCC_CREATEUSER, SCC_CREATETIME, SCC_MODIFYUSER, SCC_MODIFYTIME, SCC_EXT1,
      SCC_EXT2, SCC_EXT3, CUSTOMER_CODE,SCC_SUBMIT_TIME)
    values (#sccId#, #scId#, #sccServiceCode#, #sccInitPassword#, #sccPassword#,
      #sccServiceStarttime#, #sccServiceEndtime#, #sccStatus#, #sccRemark#, #sccEmployeeNo#,
      #sccCheckReport#, #sccInitTime#, #sccAcceptOrderTime#, #sccCheckStartTime#, #sccCheckEndTime#,
      #sccCreateuser#, #sccCreatetime#, #sccModifyuser#, #sccModifytime#, #sccExt1#, #sccExt2#,
      #sccExt3#, #customerCode#, #sccSubmitTime#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
    update B_SERVICE_CONFIG_CODE
    set SC_ID = #scId#,
      SCC_SERVICE_CODE = #sccServiceCode#,
      SCC_INIT_PASSWORD = #sccInitPassword#,
      SCC_PASSWORD = #sccPassword#,
      SCC_SERVICE_STARTTIME = #sccServiceStarttime#,
      SCC_SERVICE_ENDTIME = #sccServiceEndtime#,
      SCC_STATUS = #sccStatus#,
      SCC_REMARK = #sccRemark#,
      SCC_EMPLOYEE_NO = #sccEmployeeNo#,
      SCC_CHECK_REPORT = #sccCheckReport#,
      SCC_INIT_TIME = #sccInitTime#,
      SCC_ACCEPT_ORDER_TIME = #sccAcceptOrderTime#,
      SCC_CHECK_START_TIME = #sccCheckStartTime#,
      SCC_CHECK_END_TIME = #sccCheckEndTime#,
      SCC_CREATEUSER = #sccCreateuser#,
      SCC_CREATETIME = #sccCreatetime#,
      SCC_MODIFYUSER = #sccModifyuser#,
      SCC_MODIFYTIME = #sccModifytime#,
      SCC_EXT1 = #sccExt1#,
      SCC_EXT2 = #sccExt2#,
      SCC_EXT3 = #sccExt3#,
      CUSTOMER_CODE = #customerCode#,
      SCC_SUBMIT_TIME = #sccSubmitTime#
    where SCC_ID = #sccId#
  </update>
  
  
  
  
  <!-- 我的任务 -->
    <select id="selectMyAll" resultMap="ServiceConfigCodeResult" parameterClass="java.util.Map" >
    <!--
     查询所有已提交数据
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SCC_ID, SC_ID, SCC_SERVICE_CODE, SCC_INIT_PASSWORD, SCC_PASSWORD, SCC_SERVICE_STARTTIME,
      SCC_SERVICE_ENDTIME, SCC_STATUS, SCC_REMARK, SCC_EMPLOYEE_NO, SCC_CHECK_REPORT, SCC_INIT_TIME,
      SCC_ACCEPT_ORDER_TIME, SCC_CHECK_START_TIME, SCC_CHECK_END_TIME, SCC_CREATEUSER,
      SCC_CREATETIME, SCC_MODIFYUSER, SCC_MODIFYTIME, SCC_EXT1, SCC_EXT2, SCC_EXT3, CUSTOMER_CODE, SCC_SUBMIT_TIME
    from B_SERVICE_CONFIG_CODE
    		<!-- 2：信息收集,当sccStatus为空时选择全部 -->
    	WHERE SCC_EMPLOYEE_NO = #sccEmployeeNo# 
    	 <isNotEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS = #sccStatus#
         </isNotEmpty>
         <!-- 如果为空选择所有 -->  
    	 <isEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS >= '3'
         </isEmpty>
    	 <isNotEmpty prepend="AND"  property="serviceCode">
               SCC_SERVICE_CODE = #serviceCode#
         </isNotEmpty>
          <isNotEmpty prepend="AND"  property="enterpriceUserId">
               SC_ID IN ( SELECT SC_ID FROM B_SERVICE_CONFIG WHERE EI_ENTERPRISE_ID = #enterpriceUserId#)
         </isNotEmpty>
          <isNotEmpty prepend="AND"  property="startDate">
              <![CDATA[ SCC_CREATETIME >= '$startDate$ 00:00:00']]>
         </isNotEmpty>
         <isNotEmpty prepend="AND"  property="endDate">
            <![CDATA[   SCC_CREATETIME <= '$endDate$ 23:59:59']]>
         </isNotEmpty>
         ORDER BY SCC_ID DESC
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
  <select id="selectMyAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Wed Feb 23 09:07:56 CST 2011.
    -->
     SELECT count(1) as ID from ( 
    select SCC_ID, SC_ID, SCC_SERVICE_CODE, SCC_INIT_PASSWORD, SCC_PASSWORD, SCC_SERVICE_STARTTIME,
      SCC_SERVICE_ENDTIME, SCC_STATUS, SCC_REMARK, SCC_EMPLOYEE_NO, SCC_CHECK_REPORT, SCC_INIT_TIME,
      SCC_ACCEPT_ORDER_TIME, SCC_CHECK_START_TIME, SCC_CHECK_END_TIME, SCC_CREATEUSER,
      SCC_CREATETIME, SCC_MODIFYUSER, SCC_MODIFYTIME, SCC_EXT1, SCC_EXT2, SCC_EXT3, CUSTOMER_CODE, SCC_SUBMIT_TIME
    from B_SERVICE_CONFIG_CODE
    where SCC_EMPLOYEE_NO = #sccEmployeeNo#
   		 <isNotEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS = #sccStatus#
         </isNotEmpty>  
    	 <isEmpty prepend="AND"  property="sccStatus">
               SCC_STATUS >= '3'
         </isEmpty>
    	<isNotEmpty prepend="AND"  property="serviceCode">
               SCC_SERVICE_CODE = #serviceCode#
         </isNotEmpty>
          <isNotEmpty prepend="AND"  property="enterpriceUserId">
               SC_ID IN ( SELECT SC_ID FROM B_SERVICE_CONFIG WHERE EI_ENTERPRISE_ID = #enterpriceUserId#)
         </isNotEmpty>
  		<isNotEmpty prepend="AND"  property="startDate">
              <![CDATA[ SCC_CREATETIME >= '$startDate$ 00:00:00']]>
         </isNotEmpty>
         <isNotEmpty prepend="AND"  property="endDate">
            <![CDATA[   SCC_CREATETIME <= '$endDate$ 23:59:59']]>
         </isNotEmpty>
     ) 
  </select>
  
  
  
  
  
  
  <!-- ****************************更新状态*********************************************************** -->

 <update id="updateAccept" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    update B_SERVICE_CONFIG_CODE
    set 
      SCC_EMPLOYEE_NO = #sccEmployeeNo#,
      SCC_STATUS = '3',
      SCC_REMARK = #sccRemark#,<!-- 默认为：工号90376已接受订单，正在确认信息 -->
      SCC_ACCEPT_ORDER_TIME = to_char(sysdate,'yyyy-mm-dd hh24:mi:ss')
    where SCC_ID = #sccId#
  </update>
  
  
  <!-- 更新开始服务 -->
   <update id="updateStart" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    update B_SERVICE_CONFIG_CODE
    set 
      SCC_STATUS = '4',
      SCC_CHECK_START_TIME =  to_char(sysdate,'yyyy-mm-dd hh24:mi:ss')
    where SCC_ID = #sccId#
  </update>
  
    <!-- 更新备注 -->
   <update id="updateRemark" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    update B_SERVICE_CONFIG_CODE
    set 
 		SCC_REMARK = #sccRemark#
    where SCC_ID = #sccId#
  </update>
  
  
   <!-- 更新已完成 -->
   <update id="updateOver" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    update B_SERVICE_CONFIG_CODE
    set 
      SCC_CHECK_REPORT = #sccCheckReport#,
      SCC_STATUS = '5',
      SCC_CHECK_END_TIME =  to_char(sysdate,'yyyy-mm-dd hh24:mi:ss')
    where SCC_ID = #sccId#
  </update>
  
     <!-- 更新已废弃 -->
   <update id="updateDelete" parameterClass="cn.id5.idreal_hr.commons.bo.verification.ServiceConfigCodeBO" >
    update B_SERVICE_CONFIG_CODE
    set 
      SCC_STATUS = '6'
    where SCC_ID = #sccId#
  </update>
</sqlMap>