<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="customer" >
  <resultMap id="customerResult" class="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Thu Sep 29 10:48:02 CST 2011.
    -->
    <result column="customer_id" property="customerId" jdbcType="INTEGER" />
    <result column="customer_account" property="customerAccount" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="post" property="post" jdbcType="VARCHAR" />
    <result column="frdb" property="frdb" jdbcType="VARCHAR" />
    <result column="lxr" property="lxr" jdbcType="VARCHAR" />
    <result column="telephone" property="telephone" jdbcType="VARCHAR" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="fax" property="fax" jdbcType="VARCHAR" />
    <result column="email" property="email" jdbcType="VARCHAR" />
    <result column="vip" property="vip" jdbcType="CHAR" />
    <result column="banshichu" property="banshichu" jdbcType="VARCHAR" />
    <result column="qyfryyzzdbr" property="qyfryyzzdbr" jdbcType="VARCHAR" />
    <result column="qyfryyzznsrq" property="qyfryyzznsrq" jdbcType="DATE" />
    <result column="ypjyxkzzh" property="ypjyxkzzh" jdbcType="VARCHAR" />
    <result column="ypjyxkzyxq" property="ypjyxkzyxq" jdbcType="DATE" />
    <result column="gspzsbh" property="gspzsbh" jdbcType="VARCHAR" />
    <result column="gspzsyxq" property="gspzsyxq" jdbcType="DATE" />
    <result column="zzjgdmzdm" property="zzjgdmzdm" jdbcType="VARCHAR" />
    <result column="zzjgdmyxq" property="zzjgdmyxq" jdbcType="DATE" />
    <result column="swdjzfddbr" property="swdjzfddbr" jdbcType="VARCHAR" />
    <result column="zlbzxysyxq" property="zlbzxysyxq" jdbcType="DATE" />
    <result column="gysjb" property="gysjb" jdbcType="VARCHAR" />
    <result column="gyszq" property="gyszq" jdbcType="VARCHAR" />
    <result column="gysbz" property="gysbz" jdbcType="VARCHAR" />
    <result column="qita" property="qita" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="customerResult" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where customer_id = #customerId#
  </select>
  
 <select id="selectByOutOfDate" resultMap="customerResult" parameterClass="int" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
   WHERE  TO_DAYS(qyfryyzznsrq) - TO_DAYS(NOW())>= 20 or TO_DAYS(ypjyxkzyxq) -TO_DAYS(NOW())  >= 20 or TO_DAYS(gspzsyxq) -  TO_DAYS(NOW())>= 20 or TO_DAYS(zzjgdmyxq) -  TO_DAYS(NOW())  >= 20 or  TO_DAYS(zlbzxysyxq) - TO_DAYS(NOW())>= 20 ;
  </select>
    <select id="selectById" resultMap="customerResult"   parameterClass="int" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where customer_id = #customerId#
  </select>
  
  
  <select id="selectByCode" resultMap="customerResult" parameterClass="String" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where customer_account = #customerAccount#
  </select>
  
  <select id="selectAll" resultMap="customerResult" parameterClass="java.util.Map" >
     SELECT * FROM ( SELECT c.* from ( 
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where  1=1
     		<isNotNull property="customerAccount">
				<isNotEmpty  property="customerAccount">
				and customer_account like '%$customerAccount$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="name">
				<isNotEmpty  property="name">
				and name like '%$name$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="vip">
				<isNotEmpty  property="vip">
				and vip = 1
				</isNotEmpty>
			</isNotNull>
     ) c) a order by customer_id desc
    LIMIT  $ibegin$, 10
  </select>
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
     SELECT count(1) as ID from ( 
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where  1=1
     		<isNotNull property="customerAccount">
				<isNotEmpty  property="customerAccount">
				and customer_account like '%$customerAccount$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="name">
				<isNotEmpty  property="name">
				and name like '%$name$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="vip">
				<isNotEmpty  property="vip">
				and vip = 1
				</isNotEmpty>
			</isNotNull>
     ) a
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    delete from customer
    where customer_id = #customerId#
  </delete>
  <insert id="insert" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    insert into customer (customer_id, customer_account, password, name, address, post, frdb, lxr,
      telephone, phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita)
    values (#customerId#, #customerAccount#, #password#, #name#, #address#, #post#, #frdb#, #lxr#,
      #telephone#, #phone#, #fax#, #email#, #vip#, #banshichu#, #qyfryyzzdbr#, #qyfryyzznsrq#, #ypjyxkzzh#, #ypjyxkzyxq#, #gspzsbh#, #gspzsyxq#, #zzjgdmzdm#, #zzjgdmyxq#, #swdjzfddbr#, #zlbzxysyxq#, #gysjb#, #gyszq#, #gysbz#, #qita#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    update customer
    set 
      name = #name#,
      address = #address#,
      post = #post#,
      frdb = #frdb#,
      lxr = #lxr#,
      telephone = #telephone#,
      phone = #phone#,
      fax = #fax#,
      email = #email#,
      vip = #vip#
    where customer_id = #customerId#
  </update>
  <select id="checkCustomerId" resultMap="customerResult" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where customer_account = #customerAccount#
  </select>
  <update id="updatePassword" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    update customer set password = #password# where customer_account = #customerAccount#
  </update>
  <select id="getPasswordByCheck" resultMap="customerResult" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
    where customer_account = #customerAccount# and password=#password#
  </select>
  <!-- 采购系统第4次修改 -->
   <select id="selectAllCustomer" resultMap="customerResult" parameterClass="cn.krt.zbcg.commons.bo.system.CustomerBO" >
    select customer_id, customer_account, password, name, address, post, frdb, lxr, telephone,
      phone, fax, email, vip,banshichu,qyfryyzzdbr,qyfryyzznsrq,ypjyxkzzh,ypjyxkzyxq,gspzsbh,gspzsyxq,zzjgdmzdm,zzjgdmyxq,swdjzfddbr,zlbzxysyxq,gysjb,gyszq,gysbz,qita
    from customer
  </select>
</sqlMap>