<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="BUSSINESS_C_T_SEAT" >
  <typeAlias alias="seatBO" type="cn.id5.idreal_hr.commons.bo.businesses.SeatBO"/>
  <resultMap id="SeatResult" class="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    <result column="SEAT_ID" property="seatId" jdbcType="DECIMAL" />
    <result column="CUSTOMER_ID" property="customerId" jdbcType="DECIMAL" />
    <result column="SEAT_ACCOUNT" property="seatAccount" jdbcType="VARCHAR" />
    <result column="SEAT_PASSWORD" property="seatPassword" jdbcType="VARCHAR" />
    <result column="SEAT_IS_ADMIN" property="seatIsAdmin" jdbcType="CHAR" />
    <result column="SEAT_NAME" property="seatName" jdbcType="VARCHAR" />
    <result column="SEAT_STATE" property="seatState" jdbcType="VARCHAR" />
    <result column="SEAT_TYPE" property="seatType" jdbcType="CHAR" />
    <result column="SEAT_DEPT" property="seatDept" jdbcType="VARCHAR" />
    <result column="SEAT_POST" property="seatPost" jdbcType="VARCHAR" />
    <result column="SEAT_MOBILE" property="seatMobile" jdbcType="VARCHAR" />
    <result column="SEAT_EMAIL" property="seatEmail" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="SEAT_DF" property="seatDf" jdbcType="CHAR" />
  </resultMap>
  <resultMap id="SeatResult_res" class="seatBO" extends="SeatResult">
        <result property="customerBO" column="CUSTOMER_ID" select="C_T_CUSTOMER.selectById"/>
        <result property="roles" column="SEAT_ID" select="BUSSINESS_S_T_ROLE.getRoleBySeatId"/>
        <result property="resources" column="SEAT_ACCOUNT" select="BUSSINESS_S_T_USER_US.getResourceBySeatId"/>
  </resultMap>
  <resultMap id="SeatResult_short" class="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <result column="SEAT_ID" property="seatId" jdbcType="DECIMAL" />
    <result column="SEAT_NAME" property="seatName" jdbcType="VARCHAR" />
    <result column="SEAT_ACCOUNT" property="seatAccount" jdbcType="VARCHAR" />
  </resultMap>
   <resultMap id="SeatResult_resource" class="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
     <result column="SEAT_NAME" property="seatName" jdbcType="VARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="SeatResult_res" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <!--
    
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT
    where SEAT_ID = #seatId#
  </select>
   <select id="selectBySeatAccount" resultMap="SeatResult_res" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <!--
       根据坐席账号查找坐席
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT
    where SEAT_ACCOUNT = #seatAccount#
  </select>
   <select id="selectNameBySeatAccount" resultMap="SeatResult_res" parameterClass="java.lang.String" >
    <!--
      根据账号查找坐席名称
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    select SEAT_NAME
    from C_T_SEAT
    where SEAT_ACCOUNT = #seatAccount#
  </select>
   <select id="queryNameBySeatAccount" resultMap="SeatResult_resource" parameterClass="java.lang.String" >
    <!--
      在数据分配时用根据账号查找坐席名称
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    select SEAT_NAME
    from C_T_SEAT
    where SEAT_ACCOUNT = #seatAccount#
  </select>
   <select id="getSeatsByCid" resultMap="SeatResult_res" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.CustomerBO" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
      根据单位id查找单位下的坐席
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT  where 1=1 
      <isNotNull property="customerId">
				<isNotEmpty  property="customerId">
				 and  CUSTOMER_ID = '$customerId$'
				</isNotEmpty>
	  </isNotNull>   
     ) c) 
  </select>
   <select id="queryAnotherAdmin" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
      查找某个单位下面启用状态的单位管理员，可能是客户管理员，也可能是下级单位管理员
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT seat where 1=1 
		   	and seat.customer_id=$customerId$
			and seat.seat_state=1
			and seat.seat_is_admin=0
     ) c) 
  </select>
  <select id="selectNotHavedSeat" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
      查找登录坐席没有的其他坐席账号
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT  where 1=1 
    and SEAT_IS_ADMIN=1
    and CUSTOMER_ID='$customerId$'
    and SEAT_ACCOUNT not in (
         select uu.uu_name from S_T_USER_US uu
         where USER_ID=(
          select USER_ID from s_t_user suser
          where suser.user_name='$seatAccount$'
          and suser.user_type='2'
          )
      )
      <isNotNull property="seatId">
				<isNotEmpty  property="seatId">
				 and  SEAT_ID != '$seatId$'
				</isNotEmpty>
	  </isNotNull>   
     ) c) 
  </select>
  <select id="selectAll" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--
     查找所有的客户管理员（一级客户的管理员）
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT  where 1=1 
    <!-- 是客户管理员或者是坐席 -->
    and ((SEAT_IS_ADMIN=0 and CUSTOMER_ID  in (select customer_id from c_t_customer where length(customer_code)=3 and record_state=1))
    or (SEAT_TYPE=2 and
                        CUSTOMER_ID in
                        (select customer_id
                             from c_t_customer
                            where length(customer_code) = 3
                              and record_type = 0
                              and record_state = 1)))
     <isNotNull property="seatType">
				<isNotEmpty  property="seatType">
				 and  SEAT_TYPE = '$seatType$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="seatState">
				<isNotEmpty  property="seatState">
				 and  SEAT_STATE = '$seatState$'
				</isNotEmpty>
	  </isNotNull>
	   <isNotNull property="cCustomerId">
				<isNotEmpty  property="cCustomerId">
				 and  CUSTOMER_ID = '$cCustomerId$'
				</isNotEmpty>
	  </isNotNull>
	   <isNotNull property="seatAccount">
				<isNotEmpty  property="seatAccount">
				 and  SEAT_ACCOUNT like '%$seatAccount$%'
				</isNotEmpty>
	  </isNotNull>
	  order by SEAT_ID desc
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
   <select id="selectAllSeatInTheUnit" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT  where 1=1 
	   <isNotNull property="customerId">
				<isNotEmpty  property="customerId">
				 and  CUSTOMER_ID = '$customerId$'
				</isNotEmpty>
	  </isNotNull>
	   <isNotNull property="seatId">
				<isNotEmpty  property="seatId">
				 and  SEAT_ID != '$seatId$'
				</isNotEmpty>
	  </isNotNull>
     ) c) 
  </select>
  
  
   <select id="selectAllSubSeatNoPage" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--
      取得当前单位和所有下级单位的坐席
     客户查询 Ajax 联动 web批量有用
    -->
     select * from C_T_SEAT t where t.customer_id in (select customer_id from C_T_CUSTOMER c where c.customer_code like '$superiorCode$%' and record_state=1) 
     and t.SEAT_STATE='1'
  </select>
   <select id="selectAllSeatNoPage" resultMap="SeatResult_res">
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
     select * from C_T_SEAT t where  t.SEAT_STATE='1'
  </select>
  
  
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--
    查询所有单位时用到的分页查询
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
     SELECT count(1) as ID from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
   	 from C_T_SEAT
     )  where 1=1
    and ((SEAT_IS_ADMIN=0 and CUSTOMER_ID  in (select customer_id from c_t_customer where length(customer_code)=3 and record_state=1))
    or (SEAT_TYPE=2  and
                        CUSTOMER_ID in
                        (select customer_id
                             from c_t_customer
                            where length(customer_code) = 3
                              and record_type = 0
                              and record_state = 1)))
        <isNotNull property="seatAccount">
				<isNotEmpty  property="seatAccount">
				 and  SEAT_ACCOUNT like '%$seatAccount$%'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="seatState">
				<isNotEmpty  property="seatState">
				 and  SEAT_STATE = '$seatState$'
				</isNotEmpty>
	  </isNotNull>
	   <isNotNull property="cCustomerId">
				<isNotEmpty  property="cCustomerId">
				 and  CUSTOMER_ID = '$cCustomerId$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="seatType">
				<isNotEmpty  property="seatType">
				 and  SEAT_TYPE = '$seatType$'
				</isNotEmpty>
	  </isNotNull>
  </select>
  <select id="selectNormalSeat" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--查找所有的普通坐席
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
     SELECT * FROM ( SELECT ROWNUM AS NUMROW, c.* from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
    from C_T_SEAT  where 1=1 
    and SEAT_IS_ADMIN=1
     <isNotNull property="superCustomerId">
				<isNotEmpty  property="superCustomerId">
				 and  CUSTOMER_ID = '$superCustomerId$'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="seatAccount">
				<isNotEmpty  property="seatAccount">
				 and  SEAT_ACCOUNT like '%$seatAccount$%'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="seatState">
				<isNotEmpty  property="seatState">
				 and  SEAT_STATE = '$seatState$'
				</isNotEmpty>
	  </isNotNull>
	  order by SEAT_ID desc
     ) c) 
     <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
    <select id="selectNormalSeatAccount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--查找普通坐席列表时用到的分页sql 
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    SELECT count(1) as ID from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
   	 from C_T_SEAT
   	 where 1=1
   	 and SEAT_IS_ADMIN=1
   	  <isNotNull property="superCustomerId">
				<isNotEmpty  property="superCustomerId">
				 and  CUSTOMER_ID = '$superCustomerId$'
				</isNotEmpty>
	  </isNotNull>
	   <isNotNull property="seatAccount">
				<isNotEmpty  property="seatAccount">
				 and  SEAT_ACCOUNT like '%$seatAccount$%'
				</isNotEmpty>
	  </isNotNull>
	  <isNotNull property="seatState">
				<isNotEmpty  property="seatState">
				 and  SEAT_STATE = '$seatState$'
				</isNotEmpty>
	  </isNotNull>
     )  where 1=1 
  </select>
    <select id="selectSubUnitSeat" resultMap="SeatResult_res" parameterClass="java.util.Map" >
    <!--查找客户管理员所在单位下的所有的下级单位管理员
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    SELECT *
   FROM (SELECT ROWNUM AS NUMROW, c.*
           from (select SEAT_ID,
                        CUSTOMER_ID,
                        SEAT_ACCOUNT,
                        SEAT_PASSWORD,
                        SEAT_IS_ADMIN,
                        SEAT_NAME,
                        SEAT_STATE,
                        SEAT_TYPE,
                        SEAT_DEPT,
                        SEAT_POST,
                        SEAT_MOBILE,
                        SEAT_EMAIL,
                        REMARK, 
                        SEAT_DF
                   from C_T_SEAT
                  where 1 = 1
                  and SEAT_IS_ADMIN=0
                    and customer_id in
                        (select customer_id
                           from c_t_customer ctc
                          where ctc.customer_code like '$superCustomerCode$%'
                            and length(ctc.customer_code) = '$codeLength$'
                            and record_state=1)
                 <isNotNull property="seatAccount">
					<isNotEmpty  property="seatAccount">
					 and  SEAT_ACCOUNT like '%$seatAccount$%'
					</isNotEmpty>
	  			</isNotNull>
	  			<isNotNull property="seatState">
					<isNotEmpty  property="seatState">
					 and  SEAT_STATE = '$seatState$'
					</isNotEmpty>
	  			</isNotNull>   
	  			order by SEAT_ID desc
             ) c) 
      <![CDATA[ WHERE NUMROW >= $ibegin$  AND NUMROW < $iend$  ]]>
  </select>
    <select id="selectAllOfUnitSeatCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
    <!--查找下级单位管理员坐席的时候用到的分页
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
     SELECT count(1) as ID from ( 
    select SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN, SEAT_NAME, SEAT_STATE,
      SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF
   	 from C_T_SEAT
   	 where 1=1
   	 and SEAT_IS_ADMIN=0
   	 and  customer_id in
                        (select customer_id
                           from c_t_customer ctc
                          where ctc.customer_code like '$superCustomerCode$%'
                            and length(ctc.customer_code) = '$codeLength$'
                            and ctc.record_state=1)
    
    			 <isNotNull property="seatAccount">
					<isNotEmpty  property="seatAccount">
					 and  SEAT_ACCOUNT like '%$seatAccount$%'
					</isNotEmpty>
	  			</isNotNull>
	  			<isNotNull property="seatState">
					<isNotEmpty  property="seatState">
					 and  SEAT_STATE = '$seatState$'
					</isNotEmpty>
	  			</isNotNull>   
     )  where 1=1
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    delete from C_T_SEAT
    where SEAT_ID = #seatId#
  </delete>
  <insert id="insert" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <selectKey resultClass="java.lang.Long" keyProperty="seatId" >
      SELECT SEQ_BUSSINESS.NEXTVAL AS ID FROM DUAL
    </selectKey>
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    insert into C_T_SEAT (SEAT_ID, CUSTOMER_ID, SEAT_ACCOUNT, SEAT_PASSWORD, SEAT_IS_ADMIN,
      SEAT_NAME, SEAT_STATE, SEAT_TYPE, SEAT_DEPT, SEAT_POST, SEAT_MOBILE, SEAT_EMAIL, REMARK, SEAT_DF, LAST_UPWD_TIME)
    values (#seatId#, #customerId#, #seatAccount#, #seatPassword#, #seatIsAdmin#, #seatName#,
      #seatState#, #seatType#, #seatDept#, #seatPost#, #seatMobile#, #seatEmail#, #remark#, #seatDf#, sysdate)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    update C_T_SEAT
    set CUSTOMER_ID = #customerId#,
      SEAT_ACCOUNT = #seatAccount#,
      SEAT_PASSWORD = #seatPassword#,
      SEAT_IS_ADMIN = #seatIsAdmin#,
      SEAT_NAME = #seatName#,
      SEAT_STATE = #seatState#,
      SEAT_TYPE = #seatType#,
      SEAT_DEPT = #seatDept#,
      SEAT_POST = #seatPost#,
      SEAT_MOBILE = #seatMobile#,
      SEAT_EMAIL = #seatEmail#,
      REMARK = #remark#,
      SEAT_DF= #seatDf#
    where SEAT_ID = #seatId#
  </update>
  <update id="updateStateById" parameterClass="cn.id5.idreal_hr.commons.bo.businesses.SeatBO" >
    <!--
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
    -->
    update C_T_SEAT
    set  SEAT_STATE = #seatState#
    where SEAT_ID = #seatId#
  </update>
  
  <select id="selectByCustomerId" resultMap="SeatResult_short" parameterClass="java.lang.Long" >
    select SEAT_ID, SEAT_NAME, SEAT_ACCOUNT from C_T_SEAT  WHERE CUSTOMER_ID = $data$
  </select>
  
  <select id="selectSeatUsers" resultMap="SeatResult_short" parameterClass="java.util.Map" >
  <!-- 根据单位的customerCode，查找某单位所拥有的所有坐席帐号 -->
    select SEAT_ID, SEAT_NAME, SEAT_ACCOUNT from C_T_SEAT s,C_T_CUSTOMER c  
    where c.CUSTOMER_ID=s.CUSTOMER_ID 
    and c.record_state=1 
    <isNotEmpty prepend="AND" property="customerCode">
        c.CUSTOMER_CODE='$customerCode$'
    </isNotEmpty>
  </select>
  
  <select id="selectSeatAdmin" resultMap="SeatResult_short" parameterClass="java.lang.Long" >
  <!-- 根据单位的customerId，查找单位的管理员信息 -->
    select SEAT_ID, SEAT_NAME, SEAT_ACCOUNT from C_T_SEAT s  
    where s.CUSTOMER_ID=#customerId# and s.SEAT_IS_ADMIN='0' and s.SEAT_STATE='1'
  </select>
  
  <select id="selectSeatWithSubSeatNoPage" resultMap="SeatResult_short" parameterClass="java.util.Map" >
    <!--  获取本级或下级单位的所有seat，管理员帐户有用。李云锋 add 2010-06-08   -->
     select SEAT_ID, SEAT_NAME, SEAT_ACCOUNT from C_T_SEAT t 
     where t.customer_id in (select customer_id from C_T_CUSTOMER c where
           <isEqual compareValue="yes" property="isCurrentUnit">
               c.customer_code = '$superiorCode$'
           </isEqual>
           <isNotEqual compareValue="yes" property="isCurrentUnit">
               c.customer_code like '$superiorCode$%' 
           </isNotEqual>
           and c.record_state=1) and t.SEAT_STATE='1'
  </select>
   <select id="hasManagerOrNot" resultMap="SeatResult_short" parameterClass="java.lang.Long" >
    <!--
    
      WARNING - This element is automatically generated by idreal_hr-Abator for SSI, do not modify.
      This element was generated on Fri Mar 19 13:25:03 CST 2010.
               已经存在没有停用的管理员
    -->
    select SEAT_ID, SEAT_NAME, SEAT_ACCOUNT
    from C_T_SEAT
    where seat_is_admin=0
    and  SEAT_STATE=1
	and  CUSTOMER_ID = $data$
  </select>
</sqlMap>