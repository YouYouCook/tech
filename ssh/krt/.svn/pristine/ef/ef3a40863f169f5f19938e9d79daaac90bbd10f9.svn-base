<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="medicine" >
  <resultMap id="CineResult" class="cn.krt.zbcg.commons.bo.system.MedicineBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Thu Sep 29 10:48:02 CST 2011.
    -->
    <result column="medicine_id" property="medicineId" jdbcType="INTEGER" />
    <result column="medicine_name" property="medicineName" jdbcType="VARCHAR" />
    <result column="zlyq" property="zlyq" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="CineResultWithBLOBs" class="cn.krt.zbcg.commons.bo.system.MedicineBO" extends="medicine.CineResult" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Thu Sep 29 10:48:02 CST 2011.
    -->
    <result column="zlyq" property="zlyq" jdbcType="LONGVARCHAR" />
  </resultMap>
  <select id="selectByPrimaryKey" resultMap="CineResultWithBLOBs" parameterClass="cn.krt.zbcg.commons.bo.system.MedicineBO" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Thu Sep 29 10:48:02 CST 2011.
    -->
    select medicine_id, medicine_name, zlyq,remark
    from medicine
    where medicine_id = #medicineId#
  </select>
  
  <select id="selectById" resultMap="CineResultWithBLOBs" parameterClass="Integer" >
    <!--
      WARNING - This element is automatically generated by GBOSS-Abator for SSI, do not modify.
      This element was generated on Thu Sep 29 10:48:02 CST 2011.
    -->
    select medicine_id, medicine_name, zlyq,remark
    from medicine
    where medicine_id = #medicineId#
  </select>
  
  <select id="selectAll" resultMap="CineResult" parameterClass="java.util.Map" >
     SELECT * FROM ( SELECT c.* from ( 
     select 
     		medicine_id, medicine_name ,zlyq,remark
     from 	medicine
     where  1=1 
     		<isNotNull property="medicineName">
				<isNotEmpty  property="medicineName">
				and medicine_name like '%$medicineName$%'
				</isNotEmpty>
			</isNotNull>
     ) c) a  order by medicine_id desc
     LIMIT  $ibegin$, 10   
  </select>
  <select id="selectAllOfCount" resultClass="java.lang.String" parameterClass="java.util.Map" >
     SELECT count(1) as ID from ( 
     select 
     		medicine_id, medicine_name,zlyq,remark
    from    medicine
    where  1=1
     		<isNotNull property="medicineName">
				<isNotEmpty  property="medicineName">
				and medicine_name like '%$medicineName$%'
				</isNotEmpty>
			</isNotNull>
     )a
  </select>
  <delete id="deleteByPrimaryKey" parameterClass="cn.krt.zbcg.commons.bo.system.MedicineBO" >
    delete from medicine
    where medicine_id = #medicineId#
  </delete>
  <insert id="insert" parameterClass="cn.krt.zbcg.commons.bo.system.MedicineBO" >
    insert into medicine (medicine_id, medicine_name, zlyq,remark)
    values (#medicineId#, #medicineName#, #zlyq#,#remark#)
  </insert>
  <update id="updateByPrimaryKey" parameterClass="cn.krt.zbcg.commons.bo.system.MedicineBO" >
    update medicine
    set medicine_name = #medicineName#,zlyq = #zlyq#,remark = #remark#
    where medicine_id = #medicineId#
  </update>
  
  <select id="selectAlls" resultMap="CineResult" parameterClass="java.util.Map" >
     SELECT * FROM ( SELECT c.* from ( 
     select 
     		DISTINCT medicine.medicine_id, medicine_name ,zlyq,medicine.remark
     from 	medicine,medicine_cg
     where  1=1 and  medicine.medicine_id = medicine_cg.medicine_id
     		<isNotNull property="medicineName">
				<isNotEmpty  property="medicineName">
				and medicine_name like '%$medicineName$%'
				</isNotEmpty>
			</isNotNull>
		<isNotNull property="beginDate">
			<isNotEmpty  property="beginDate">
		 <![CDATA[	and medicine_cg.begin_date >= '$beginDate$' ]]> 
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="endDate">
			<isNotEmpty  property="endDate">
		 <![CDATA[	and medicine_cg.end_date <= '$endDate$'  ]]> 
			</isNotEmpty>
		</isNotNull>
     ) c) a  order by a.medicine_id desc
     LIMIT  $ibegin$, 10   
  </select>
  <select id="selectAllOfCounts" resultClass="java.lang.String" parameterClass="java.util.Map" >
     SELECT count(1) as ID from ( 
     select 
     		DISTINCT medicine.medicine_id, medicine_name,zlyq,medicine.remark
  from 	medicine,medicine_cg	
  where  1=1 and  medicine.medicine_id = medicine_cg.medicine_id
     		<isNotNull property="medicineName">
				<isNotEmpty  property="medicineName">
				and medicine_name like '%$medicineName$%'
				</isNotEmpty>
			</isNotNull>
			<isNotNull property="beginDate">
			<isNotEmpty  property="beginDate">
		 <![CDATA[	and medicine_cg.begin_date >= '$beginDate$' ]]> 
			</isNotEmpty>
		</isNotNull>
		<isNotNull property="endDate">
			<isNotEmpty  property="endDate">
		 <![CDATA[	and medicine_cg.end_date <= '$endDate$'  ]]> 
			</isNotEmpty>
		</isNotNull>
     )a
  </select>
  <!-- 采购系统第4次修改 -->
   <select id="all" resultMap="CineResultWithBLOBs" parameterClass="cn.krt.zbcg.commons.bo.system.MedicineBO" >  
    select medicine_id, medicine_name, zlyq,remark
    from medicine
  </select>
</sqlMap>